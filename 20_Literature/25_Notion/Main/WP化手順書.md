---
notion_id: 436b94f8-9eb4-4cf8-9fb2-2d06ab45ddec
account: Main
title: WP化手順書
url: https://www.notion.so/WP-436b94f89eb44cf89fb22d06ab45ddec
created_time: 2022-10-23T01:51:00.000Z
last_edited_time: 2023-02-20T00:52:00.000Z
sync_status: placeholder
sync_time: 2025-07-12T15:01:15.117758
---
# WP化手順書

<details>
<summary>目次</summary>
</details>
---
# 環境
# 準備するファイル
- htmlファイル一式
# 大まかな流れ
1. ローカル環境の構築（Local）
1. 既存のHTMLファイルをLocalのWordPressで表示させる（WordPress構築）
1. 動的化させたい部分をプラグイン（Advanced Custom Fields）を使用して管理画面から変更できるようにする
1. プラグイン（All-in-One WP Migration）を使用してエクスポート、インポートする。
# WP用のローカル環境の構築
  ## Localでサイトを新規作成
  ### 参考URL↓の**Local by Flywheel(Local)で環境設定を行うを参照**
  - **Localのダウンロードと設定手順は以下の参考URLを参照**
  ### 新規サイトをLocalで立ち上げる。
  1. 新しく立ち上げるには緑の”＋”ボタンをクリック
  1. “Create a new site”を選択し、”Continue”をクリック
  1. 名前を入力し、”Continue”をクリック
  1. ”Preferred”を選択し、”Continue”をクリック
  1. 管理画面に入るための”username”と”password”を入力し、”Add Site”をクリック
  1. パスワードを聞かれるのでPCのログインパスワードを入力する
  1. スクショのようになれば立ち上げ完了
  1. Localの”Go tosite folder”をクリック
  1. WP用のファイル一式をthemesフォルダに入れる
  1. テーマが反映されているかを確認
  1. WordPress管理画面にログイン（nameとpassは手順5.で設定したもの）し、Settingから言語を日本語に
  1. 外観→テーマ→templateテーマを有効化し、サイトを表示。以下のような画面でなっていれば環境構築は終了
# 既存のHTMLファイルをWP化
  ## テーマ名を変更する
  1. htmlフォルダの中身を環境構築したフォルダに移す
  1. テーマディレクトリをエディターで開き、テーマディレクトリ直下のstyle.cssを修正する。
  ## 各phpファイルに該当するhtmlをコピペする
  1. header.php→head要素とheader要素をコピペする。
  1. front-page.php→main要素の中身を記述する。
  1. footer.php→head要素とheader要素をコピペする。
  ## css,jsファイルの読み込みをfunctions.phpに記述する（ここ関数の理解がないと少し難しいです）
  ※テンプレートファイルに既に記述済み
  1. 関数（function hogehoge()）に読み込むファイルを記述する。
  1. ファイルの読み込ませ方（CSS）
  1. ファイルの読み込ませ方（JS）※*ie8.jsはコメントアウトする*
  1. functions.phpに書き終えたら、headとbody終了タグCSSとJSの読み込みコードを削除する。
  ### サイトを確認し、CSSファイル、JSファイルが読み込まれているか確認
  読み込まれていない場合の確認事項
  1. 検証ツールを確認し、該当ファイルが読み込まれているか確認
  ## リンク先、画像のパスをWP用に書き換える（2/12追記）
  1. リンクパス（相対パス）
  1. 画像パス（相対パス）
  1. 画像パス（data属性で取得している箇所）
  1. 画像パス（aタグのリンクで取得している箇所）
  以上で既存のHTMLファイルをWPで表示できるようになる。
# 固定ページを作成する（カスタムフィールドの反映に必要）
  1. 固定ページ（トップページ）を作成する。
タイトルは任意、パーマリンク設定も英字に編集する。
  1. 管理画面→設定→表示設定のホームページの表示を
”固定ページ”にチェック、ホームページの選択部分を作成したページに変更し、保存する。
# テキスト及び画像を管理画面から編集できるようにする（動的化）
  - プラグインを使用する（Advanced Custom Fields）
  1. プラグインをインストールし、有効化する。
プラグイン→新規追加→”Advanced Custom Fields”を検索
  1. カスタムフィールドを作成する。管理画面のメニューバーに”カスタムフィールド”が出てくる。
  1. 編集したい箇所分のカスタムフィールドを作成する
カスタムフィールド→新規追加
  1. 新規フィールドグループ名を任意に指定
  ## カスタムフィールドを追加していく
  1. フィールド名を追加（+Add Field）
  1. フィールドタイプを選択する
  1. フィールドラベルを記載する
  1. フィールド名を記載する
  1. テキスト→初期値を記載する（任意）
  1. 画像→戻り値を記載する
  1. 必要箇所に対して1〜6を繰り返す。
  1. 全ての箇所を追加できたら、下の方にある設定を編集する。
条件部分に”固定ページ”、”等しい”、”ホームページに設定した固定ページ名”を選択し、保存（右上の”Save Changes”ボタン）する。
  ## 追加したカスタムフィールドをサイトに反映させる
  参考サイト：[http://galileo-venus.com/2020/05/20/20200518_wp_acfout/](http://galileo-venus.com/2020/05/20/20200518_wp_acfout/)
  ### テキストの場合
  1. 設定したカスタムフィールド名（英字）を使用する。
  1. テキストを反映させる関数を使用する
  ### 画像の場合
  1. 設定したカスタムフィールド名（英字）を使用する。
  1. 画像を反映させる関数を使用する
# 投稿を表示させる（2/12修正）
  - 投稿ページに記載した記事を任意の場所に表示させる
参考にする記事（[https://toha-susume.com/wp-loop/#toc2](https://toha-susume.com/wp-loop/#toc2)）
  - 投稿にする場所に対してメインループの記述をする
  - 今回の場合、<li>〜</li>（記事の内容部分）までをループさせたいので、以下のような記述になる。
  - サムネイル画像、タイトル、記事の日付、カテゴリー、記事の内容を取得するためのコードを適当な箇所に記述する。
  - 投稿記事の表示件数は管理画面の設定にて管理する。お知らせ一覧がない場合は表示数を10000くらいまで上げておくと全て表示される。
# お問合せ（2/20修正）
  参考記事[https://lucy.ne.jp/bazubu/contact-form-7-3-23869.html](https://lucy.ne.jp/bazubu/contact-form-7-3-23869.html)（参考記事変更2/20）
  現状のフォームがどのように設定されているか不明なため、プラグイン（**Contact Form 7**）の一般的な使用方法になります。
  改めて私が書くより、適当にまとめている記事がありますので、そちらを参考にした方がわかりやすいかと思います。
  以下sampleデータでの実装（参考記事より抜粋）
  1. 管理画面よりプラグイン（**Contact Form 7**）をインストールし、有効化する。
  1. 管理画面のサイドバーより「お問い合わせ」→「新規追加」を選択
  1. sampleデータのフォーム該当部分を「新規追加」クリック後に出るフォームにコピペ
formタグは不要（以下に該当部分を載せておきます）
sampleデータ側のformタグを含む該当部分は不要となる。
※お問い合わせ受付後のメッセージやエラーテキストはContact Form 7のメッセージパネルにて編集可能
  1. inputタグをContact Form 7のテンプレートに書き換える
※Contact Form 7の仕様で表示崩れが起きることがあるため、その際は該当部分のcssを書き換える
  1. Contact Form 7のショートコードをコピーし、以下どちらかの方法でコードに反映する
  1. 自動返信メールの設定
  1. メールの送受信の確認
# 本番環境への上げ方（例）
  参考記事[https://blog-bootcamp.jp/start/wordpress-allinonewpmigration/](https://blog-bootcamp.jp/start/wordpress-allinonewpmigration/)
  - こちらもお問合せと同様に一般的なものになりますので、適当にまとめている記事がありますので、そちらを参考にした方がわかりやすいかと思います。
# おまけ：管理画面を見やすくする
  カスタムフィールドが多くなってくると固定ページがガスタムフィールドばかりになり、見づらくなる。
  そのため、カスタムフィールドの機能にあるタグやアコーディオン、グループを使う。
  今回はタブを使用して管理をしやすくする。
  各セクションごとにタブで切り替える仕様にする。
  1. カスタムフィールドの設定画面で、フィールドタイプ”タブ”を選択し、追加する
  1. 各セクションの一番先頭にタブを持ってくる（スクショ赤枠部分をドラッグで移動できる）
  1. 各セクションごとに分けるとこのようになる↓（スクショは１つずつタブで区切っている）
この状態で保存
  1. 固定ページに行って表示を確認すると、タブで分けられて管理できるようになっている。
- 仕様書を作成するにあたって制作したファイルデータ
ダウンロード期限：2022年12月25日(日)
  [https://xgf.nu/tFCK](https://xgf.nu/tFCK)